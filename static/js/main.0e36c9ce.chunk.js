(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{314:function(t,e,n){},320:function(t,e,n){},321:function(t,e,n){},322:function(t,e,n){},323:function(t,e,n){},324:function(t,e,n){},325:function(t,e,n){},528:function(t,e){},530:function(t,e){},540:function(t,e){},542:function(t,e){},569:function(t,e){},571:function(t,e){},572:function(t,e){},577:function(t,e){},579:function(t,e){},585:function(t,e){},587:function(t,e){},606:function(t,e){},618:function(t,e){},621:function(t,e){},624:function(t,e,n){},625:function(t,e,n){},635:function(t,e,n){},636:function(t,e,n){},637:function(t,e,n){},638:function(t,e,n){"use strict";n.r(e);var s=n(1),a=n.n(s),i=n(31),c=n.n(i),o=(n(314),n(2)),r=n(5),l=n(6),d=n(8),u=n(7),h=(n.p,n(9)),j=n(15),b=n.n(j),p=n(11),O=n(659),f=n(658),g=n(17),x="http://3.67.83.253:8000";function m(t,e){return t.startsWith("/")&&(t=t.substring(1)),fetch("".concat(x,"/").concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))},body:JSON.stringify(e)})}function A(t,e){t.startsWith("/")&&(t=t.substring(1));var n=new URLSearchParams(e).toString();return fetch("".concat(x,"/").concat(t).concat(n),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}})}var v=n(0),C=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).updateLikeNumber=function(){console.log(s.state.userID),console.log(s.state.id),m("/api/post/like/".concat(s.state.id),{}).then((function(t){return t.json()})).then((function(t){var e=t.likeList;console.log(t),console.log(e.length),setTimeout((function(){s.setState({likeCount:t.likeList.length})}),300),s.state.liked?setTimeout((function(){s.setState({liked:!1,iconPath:p.f})}),300):setTimeout((function(){s.setState({liked:!0,iconPath:p.e})}),300)}))},s.state=Object(o.a)(Object(o.a)({},t),{},{liked:!1,likeCount:t.likeList?t.likeList.length:0,userID:localStorage.getItem("userID"),iconPath:p.f}),s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;if(this.state.likeList){for(var e=0;e<this.state.likeList.length;e++){this.state.likeList[e][0]==this.state.userID&&this.setState({liked:!0,iconPath:p.e})}setTimeout((function(){console.log(t.state.liked)}),500)}}},{key:"render",value:function(){return Object(v.jsxs)("div",{class:"row2",children:[Object(v.jsx)(b.a,{path:this.state.iconPath,size:2,onClick:this.updateLikeNumber}),Object(v.jsx)("div",{children:this.state.likeCount})]})}}]),n}(a.a.Component);function S(){return Object(v.jsx)("div",{children:Object(v.jsx)(b.a,{path:p.i,size:2})})}var y=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).showPopup=function(){s.setState({popupState:!0})},s.closePopup=function(){s.setState({popupState:!1})},s.state=Object(o.a)(Object(o.a)({},t),{},{popupState:!1}),console.log(s.state),s}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{class:"row2",children:[Object(v.jsx)(C,Object(o.a)({},this.props)),Object(v.jsx)(S,{}),this.props.id?Object(v.jsx)(g.b,{class:"push",to:"/viewPost?id=".concat(this.state.id),children:Object(v.jsx)(b.a,{path:p.h,size:2})}):Object(v.jsx)(b.a,{path:p.h,size:2}),Object(v.jsx)(S,{}),Object(v.jsx)(b.a,{path:p.q,size:2,onClick:this.showPopup}),Object(v.jsx)(S,{}),Object(v.jsx)(b.a,{path:p.d,size:2,onClick:this.showPopup}),Object(v.jsx)(S,{}),Object(v.jsx)(b.a,{path:p.a,size:2,onClick:this.showPopup})]}),Object(v.jsx)(O.a,{open:this.state.popupState,autoHideDuration:3e3,onClose:this.closePopup,children:Object(v.jsx)(f.a,{onClose:this.closePopup,severity:"info",sx:{width:"100%"},children:"This feature is not available now and coming soon, thanks heaps for your patience!"})})]})}}]),n}(a.a.Component),w=n(131),T=n(101),k=n(127),P=n(58),D=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).props=t,s}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{class:"Post",children:[Object(v.jsx)(E,Object(o.a)({},this.props))," ",Object(v.jsx)(y,Object(o.a)({},this.props))]})}}]),n}(a.a.Component),E=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).state=Object(o.a)(Object(o.a)({},t),{},{contentSmall:t.story&&t.story.length>200?t.story.slice(0,200):t.story,continueReading:t.story&&t.story.length>200}),console.log(s.state),s.getMoreContent=s.getMoreContent.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"getMoreContent",value:function(){this.setState((function(t){var e=Object(o.a)({},t);return e.contentSmall=t.story,e.continueReading=!1,e}))}},{key:"render",value:function(){return Object(v.jsxs)(T.a,{children:[Object(v.jsx)(T.a,{children:Object(v.jsxs)(k.a,{style:{alignItems:"center"},children:[Object(v.jsx)(P.a,{sm:11,style:{alignItems:"center"},children:this.state.owner&&Object(v.jsxs)(g.b,{class:"push",to:"/profilePage?id=".concat(this.state.owner),style:{textDecoration:"none",color:"#000"},children:[Object(v.jsx)("img",{class:"circle",width:"50px",height:"50px",src:this.props.userPhoto?this.props.userPhoto:"./static/media/postory_logo_no_text.ec3bad21.png"}),Object(v.jsx)("a",{style:{margin:"10px"},children:this.state.username?this.state.username:"ME"})]})}),Object(v.jsx)(P.a,{sm:1,children:this.state.owner==localStorage.getItem("userID")&&this.state.id&&Object(v.jsx)(g.b,{class:"push",to:"/editPost?id=".concat(this.state.id),children:Object(v.jsx)(b.a,{path:p.l,title:"Edit Post",size:1,color:"#FF8F49"})})})]})}),Object(v.jsxs)("div",{class:"row2 fitText",children:[this.state.locations&&this.state.locations.filter((function(t){return"string"===typeof t[0]&&""!=t[0]})).map((function(t,e){return Object(v.jsxs)(w.a,{pill:!0,bg:"secondary",style:{fontSize:"10px"},children:[Object(v.jsx)(b.a,{path:p.k,title:"Location",size:.7,color:"#53BEC6"}),t[0]]})})),this.state.year&&Object(v.jsxs)(w.a,{pill:!0,bg:"warning",style:{fontSize:"10px"},text:"dark",children:[Object(v.jsx)(b.a,{path:p.g,title:"Years",size:.7,color:"#53BEC6"}),this.state.year[0],this.state.year.length>1&&"-"+this.state.year[1]]}),this.state.tags&&this.state.tags.map((function(t,e){return Object(v.jsxs)(w.a,{pill:!0,bg:"danger",style:{fontSize:"10px"},children:[Object(v.jsx)(b.a,{path:p.r,title:"Tag",size:.7,color:"#53BEC6"}),t]})}))]}),this.state.id&&Object(v.jsx)(g.b,{class:"push",to:"/viewPost?id=".concat(this.state.id),style:{textDecoration:"none",color:"#000"},children:Object(v.jsx)("p",{style:{width:"100%"},class:"mainContent",children:Object(v.jsx)("b",{style:{fontSize:"16px",fontWeight:"bold"},children:this.state.title?this.state.title:""})})}),!this.state.id&&Object(v.jsx)("p",{style:{width:"100%"},class:"mainContent",children:Object(v.jsx)("b",{style:{fontSize:"16px",fontWeight:"bold"},children:this.state.title?this.state.title:""})}),Object(v.jsx)("a",{style:{fontSize:"14px"},children:this.state.contentSmall?this.state.contentSmall:""}),this.state.continueReading&&Object(v.jsx)("a",{class:"mainContent",onClick:this.getMoreContent,children:Object(v.jsx)("b",{children:" ...Continue Reading"})}),Object(v.jsx)("p",{}),Object(v.jsxs)("div",{children:[this.state.preview&&Object(v.jsxs)("div",{class:"row2 image",children:[this.state.preview.length>0&&Object(v.jsx)("img",{width:"200px",src:URL.createObjectURL(this.state.preview[0])}),this.state.preview.length>1&&Object(v.jsx)("img",{width:"200px",src:URL.createObjectURL(this.state.preview[1])})]}),!this.state.preview&&Object(v.jsxs)("div",{class:"row2 image",children:[Object(v.jsx)("img",{width:"200px",src:this.state.images&&this.state.images[0]?this.state.images[0]:""}),Object(v.jsx)("img",{width:"200px",src:this.state.images&&this.state.images[0]&&this.state.images[1]?this.state.images[1]:""})]})]})]})}}]),n}(a.a.Component),B=(a.a.Component,D),M=(n(320),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;Object(r.a)(this,n),s=e.call(this,t);for(var a={story:"Praesent eu libero et diam mollis placerat sed eget eros. Curabitur commodo purus in lorem fermentum, a suscipit tellus faucibus. Morbi justo nibh, iaculis sed porttitor id, faucibus in lorem. Aenean porttitor imperdiet velit id laoreet. Mauris tortor urna, fermentum eu eros vel, vestibulum malesuada mi. Vivamus venenatis magna nec eleifend hendrerit. Morbi lacinia ligula a quam varius, ac pretium libero semper. Fusce ultrices arcu ut augue sodales vehicula. Fusce pellentesque urna vel arcu facilisis, sed consectetur enim mollis. Nam suscipit euismod elit, ac cursus ex tempor eget. Curabitur aliquet ante orci, at vestibulum leo finibus vel. Praesent ullamcorper pharetra rhoncus. Vestibulum euismod nulla in ligula bibendum aliquam. Curabitur nec varius ligula. Duis feugiat mi risus, eget auctor lacus scelerisque sit amet.",owner:"Daniel Jones",locations:["The World","Ankara"],storyDate:"2021",tags:["Cool"]},i=[],c=0;c<10;c++)i.push(a);return s.state={posts:i},A("/api/post/all",{}).then((function(t){return t.json()})).then((function(t){return s.setState((function(e){try{var n=JSON.parse(JSON.stringify(e));return t.sort((function(t,e){return parseInt(e.id)-parseInt(t.id)})),n.posts=t,n.fetched=!0,n}catch(s){return e}}))})).catch((function(t){return console.log(t)})),s}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("header",{className:"App-header",children:[Object(v.jsx)("p",{children:"POSTORY"}),this.state.fetched&&this.state.posts.map((function(t,e){return Object(v.jsx)(B,Object(o.a)({},t),e)})),Object(v.jsx)(g.b,{to:"/createPost",variant:"v6",children:Object(v.jsx)(b.a,{class:"circle homePageCreatePostButton",path:p.m,title:"Create a Post",size:2,color:"black"})})]})})}}]),n}(a.a.Component)),R=(n(321),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).props=t,s.parentHandler=t.parentHandler,s.sendParent=s.sendParent.bind(Object(h.a)(s)),s.state={title:"",body:""},s.getEditInfo=s.getEditInfo.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"getEditInfo",value:function(t){this.setState({title:t.title,body:t.story})}},{key:"sendParent",value:function(){this.props.parentHandler("textChooser",this.state)}},{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{id:"textchooser-div",children:[Object(v.jsx)("label",{htmlFor:"textchooser-title",id:"textchooser-title-label",children:"Post title"}),Object(v.jsx)("input",{value:this.state.title,type:"text",id:"textchooser-title",onChange:function(e){t.setState((function(t){return{title:e.target.value,body:t.body}}))}}),Object(v.jsx)("label",{htmlFor:"textchooser-body",id:"textchooser-body-label",children:"Post body"}),Object(v.jsx)("textarea",{value:this.state.body,id:"textchooser-body",onChange:function(e){t.setState((function(t){return{title:t.title,body:e.target.value}}))}})]})}}]),n}(a.a.Component)),I=n(10),L=(n(322),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).props=t,s.parentHandler=t.parentHandler,s.sendParent=s.sendParent.bind(Object(h.a)(s)),s.state={startYear:null,endYear:null,startMonth:null,endMonth:null,startDay:null,endDay:null,startTime:null,endTime:null},s.getEditInfo=s.getEditInfo.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"getEditInfo",value:function(t){var e=t.year||[null,null],n=Object(I.a)(e,2),s=n[0],a=n[1],i=t.month||[null,null],c=Object(I.a)(i,2),o=c[0],r=c[1],l=t.day||[null,null],d=Object(I.a)(l,2),u=d[0],h=d[1],j=t.hour||[null,null],b=Object(I.a)(j,2),p=b[0],O=b[1],f=t.minute||[null,null],g=Object(I.a)(f,2),x=g[0],m=g[1],A=p&&x&&"".concat(p,":").concat(x),v=O&&m&&"".concat(O,":").concat(m);this.setState((function(t){return{startYear:s,endYear:a,startMonth:o,endMonth:r,startDay:u,endDay:h,startTime:A,endTime:v}}))}},{key:"sendParent",value:function(){this.props.parentHandler("timeChooser",this.state)}},{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{id:"timechooser-div",children:[Object(v.jsx)("div",{children:"Choose start and end years"}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"20px"},children:[Object(v.jsx)("input",{type:"number",min:"1900",max:"2099",step:"1",value:this.state.startYear||"",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{startYear:e.target.value.toString()})}))}}),Object(v.jsx)("input",{type:"number",min:"1900",max:"2099",step:"1",value:this.state.endYear||"",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{endYear:e.target.value.toString()})}))}}),Object(v.jsx)("button",{onClick:function(){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{startYear:null,endYear:null,startMonth:null,endMonth:null,startDay:null,endDay:null,startTime:null,endTime:null})}))},children:"Clear"})]}),this.state.startYear&&this.state.endYear&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Choose start and end months"}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"20px"},children:[Object(v.jsx)("input",{type:"number",min:"1",max:"12",step:"1",value:this.state.startMonth||"",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{startMonth:e.target.value.toString()})}))}}),Object(v.jsx)("input",{type:"number",min:"1",max:"12",step:"1",value:this.state.endMonth||"",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{endMonth:e.target.value.toString()})}))}}),Object(v.jsx)("button",{onClick:function(){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{startMonth:null,endMonth:null,startDay:null,endDay:null,startTime:null,endTime:null})}))},children:"Clear"})]})]}),this.state.startMonth&&this.state.endMonth&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Choose start and end days"}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"20px"},children:[Object(v.jsx)("input",{type:"number",min:"1",max:"31",step:"1",value:this.state.startDay||"",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{startDay:e.target.value.toString()})}))}}),Object(v.jsx)("input",{type:"number",min:"1",max:"31",step:"1",value:this.state.endDay||"",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{endDay:e.target.value.toString()})}))}}),Object(v.jsx)("button",{onClick:function(){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{startDay:null,endDay:null,startTime:null,endTime:null})}))},children:"Clear"})]})]}),this.state.startDay&&this.state.endDay&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Choose start and end time"}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"20px"},children:[Object(v.jsx)("input",{type:"time",value:this.state.startTime||"",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{startTime:e.target.value.toString()})}))}}),Object(v.jsx)("input",{type:"time",value:this.state.endTime||"",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{endTime:e.target.value.toString()})}))}}),Object(v.jsx)("button",{onClick:function(){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{startTime:null,endTime:null})}))},children:"Clear"})]})]})]})}}]),n}(a.a.Component)),F=(n(323),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).onChangeValue=function(t){s.setState({value:t.target.value})},s.clearAllSelectedTags=function(){s.setState({selectedTags:[]})},s.removeTag=function(t){s.setState((function(e){return{selectedTags:e.selectedTags.filter((function(e,n){return t!==n}))}}))},s.addTagToSelectedTags=function(){s.setState((function(t){return{selectedTags:t.selectedTags.concat(t.value),value:""}}))},s.parentHandler=t.parentHandler,s.sendParent=s.sendParent.bind(Object(h.a)(s)),s.state={value:"",selectedTags:[]},s.getEditInfo=s.getEditInfo.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"getEditInfo",value:function(t){this.setState({selectedTags:t.tags})}},{key:"sendParent",value:function(){this.props.parentHandler("tagChooser",this.state)}},{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{id:"tagchooser-div",children:[Object(v.jsx)("label",{htmlFor:"tagchooser-title",id:"textchooser-title-label",children:"#Tags"}),Object(v.jsxs)("div",{class:"row2",children:[Object(v.jsx)("input",{type:"text",value:this.state.value,onChange:this.onChangeValue}),Object(v.jsx)("button",{type:"button",onClick:this.addTagToSelectedTags,disabled:!this.state.value,children:"Add"}),Object(v.jsx)("button",{type:"button",onClick:this.clearAllSelectedTags,children:"Clear All"})]}),"Selected Tags",Object(v.jsx)("ul",{children:this.state.selectedTags.map((function(e,n){return Object(v.jsxs)("li",{children:[e,Object(v.jsx)("button",{type:"button",onClick:function(){return t.removeTag(n)},children:"x"})]},e)}))})]})}}]),n}(a.a.Component)),H=(n(324),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).onChangeValue=function(t){s.setState({value:t.target.value})},s.clearAllSelectedPeople=function(){s.setState({selectedPeople:[]})},s.removePeople=function(t){s.setState((function(e){return{selectedPeople:e.selectedPeople.filter((function(e,n){return t!==n}))}}))},s.addTagToSelectedPeople=function(){s.setState((function(t){return{selectedPeople:t.selectedPeople.concat(t.value),value:""}}))},s.parentHandler=t.parentHandler,s.sendParent=s.sendParent.bind(Object(h.a)(s)),s.state={value:"",selectedPeople:[]},s}return Object(l.a)(n,[{key:"sendParent",value:function(){this.props.parentHandler("peopleChooser",this.state)}},{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{id:"peoplechooser-div",children:[Object(v.jsx)("label",{htmlFor:"peoplechooser-title",id:"peoplechooser-title-label",children:"People"}),Object(v.jsxs)("div",{class:"row2",children:[Object(v.jsx)("input",{type:"text",value:this.state.value,onChange:this.onChangeValue}),Object(v.jsx)("button",{type:"button",onClick:this.addTagToSelectedPeople,disabled:!this.state.value,children:"Add"}),Object(v.jsx)("button",{type:"button",onClick:this.clearAllSelectedPeople,children:"Clear All"})]}),"Selected People",Object(v.jsx)("ul",{children:this.state.selectedPeople.map((function(e,n){return Object(v.jsxs)("li",{children:[e,Object(v.jsx)("button",{type:"button",onClick:function(){return t.removePeople(n)},children:"x"})]},e)}))}),Object(v.jsx)("button",{id:"peoplechooser-plus-button",onClick:this.sendParent,children:Object(v.jsx)(b.a,{path:p.n,size:1,id:"peoplechooser-plus-icon"})})]})}}]),n}(a.a.Component)),_=n(129),z=(n(325),n(32)),N=Object(z.withScriptjs)(Object(z.withGoogleMap)((function(t){var e=a.a.useState([]),n=Object(I.a)(e,2),i=n[0],c=n[1],o=a.a.useState(!1),r=Object(I.a)(o,2),l=r[0],d=r[1];Object(s.useEffect)((function(){t.editLocations&&u(t.editLocations)}),[]);var u=function(t){c(t)};return Object(v.jsxs)("div",{children:[Object(v.jsx)(O.a,{open:l,autoHideDuration:1e3,onClose:function(){return d(!1)},children:Object(v.jsxs)(f.a,{onClose:function(){return d(!1)},severity:"error",sx:{width:"100%"},children:["You can add at most ",7," Locations."]})}),Object(v.jsx)(z.GoogleMap,{defaultZoom:8,defaultCenter:{lat:41,lng:28},onClick:function(e){i.length<7?c((function(n){var s=[].concat(Object(_.a)(n),[{lat:e.latLng.lat(),lng:e.latLng.lng()}]);return t.setParentLocation(s),s})):d(!0)},children:i.map((function(e,n){return Object(v.jsx)(z.Marker,{draggable:!0,onDragEnd:function(t,e,s){return c((function(e){return e[n]={lat:t.latLng.lat(),lng:t.latLng.lng()},e}))},options:{icon:"https://mt.google.com/vt/icon/text=".concat(n+1,"&psize=16&font=fonts/arialuni_t.ttf&color=ff330000&name=icons/spotlight/spotlight-waypoint-b.png&ax=44&ay=48&scale=1")},onClick:function(){return e=n,void c((function(n){for(var s=[],a=0;a<n.length;a++)a!=e&&s.push(n[a]);return t.setParentLocation(s),s}));var e},position:e},n)}))})]})}))),G=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).setLocations=function(t){s.setState({selectedLocations:t})},s.parentHandler=t.parentHandler,s.sendParent=s.sendParent.bind(Object(h.a)(s)),s.state={selectedLocations:[]},s.getEditInfo=s.getEditInfo.bind(Object(h.a)(s)),s.mapRef=a.a.createRef(),s}return Object(l.a)(n,[{key:"getEditInfo",value:function(t){this.setState({edit:!0,selectedLocations:t.locations.map((function(t){return{name:t[0],lng:t[2],lat:t[1]}}))})}},{key:"sendParent",value:function(){this.props.parentHandler("locationChooser",this.state.selectedLocations.map((function(t){return{name:t.name?t.name:"",longitude:t.lng,latitude:t.lat}})))}},{key:"render",value:function(){var t=this,e=Object({NODE_ENV:"production",PUBLIC_URL:"/2021SpringGroup9",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_API_KEY?"key="+Object({NODE_ENV:"production",PUBLIC_URL:"/2021SpringGroup9",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_API_KEY+"&":"";return Object(v.jsxs)("div",{id:"locationchooser-div",children:[Object(v.jsxs)("div",{children:[this.state.edit&&Object(v.jsx)(N,{editLocations:this.state.selectedLocations.map((function(t){return{lat:t.lat,lng:t.lng}})),setParentLocation:this.setLocations,isMarkerShown:!0,googleMapURL:"https://maps.googleapis.com/maps/api/js?".concat(e,"v=3.exp&libraries=geometry,drawing,places"),loadingElement:Object(v.jsx)("div",{style:{height:"100%"}}),containerElement:Object(v.jsx)("div",{style:{height:"200px"}}),mapElement:Object(v.jsx)("div",{style:{height:"100%"}})}),!this.state.edit&&Object(v.jsx)(N,{setParentLocation:this.setLocations,isMarkerShown:!0,googleMapURL:"https://maps.googleapis.com/maps/api/js?".concat(e,"v=3.exp&libraries=geometry,drawing,places"),loadingElement:Object(v.jsx)("div",{style:{height:"100%"}}),containerElement:Object(v.jsx)("div",{style:{height:"200px"}}),mapElement:Object(v.jsx)("div",{style:{height:"100%"}})})]}),Object(v.jsx)("a",{children:"Please use below if you want to add names to the locations."}),Object(v.jsx)("div",{style:{height:"200px"},class:"overflow",children:Object(v.jsx)("ul",{children:this.state.selectedLocations.map((function(e,n){return Object(v.jsxs)("li",{children:[n+1,Object(v.jsx)("input",{value:t.state.selectedLocations[n].name,type:"text",onChange:function(e){return t.setState((function(t){var s=t;return s.selectedLocations[n].name=e.target.value,s}))}})]},n)}))})})]})}}]),n}(a.a.Component),U=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).refStory=a.a.createRef(),s.refLocation=a.a.createRef(),s.refTime=a.a.createRef(),s.refTags=a.a.createRef(),s.allRefs=[s.refStory,s.refLocation,s.refTime,s.refTags],s.state={selected:"Story",postData:{textChooser:{title:" ",body:" "},locationChooser:[],timeChooser:{startDate:"",startTime:""},tagChooser:{selectedTags:[]},owner:"USER",imageComponent:null}},s.handleChildObjectSend=s.handleChildObjectSend.bind(Object(h.a)(s)),s.select=s.select.bind(Object(h.a)(s)),s.sendToBackend=s.sendToBackend.bind(Object(h.a)(s)),s.handleSuccessClose=s.handleSuccessClose.bind(Object(h.a)(s)),s.handleInfoClose=s.handleInfoClose.bind(Object(h.a)(s)),s.prepareObjectToSend=s.prepareObjectToSend.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"handleChildObjectSend",value:function(t,e){var n={textChooser:"Story text Content",locationChooser:"Location Content",timeChooser:"Time Content",peopleChooser:"People Content",tagChooser:"Tag Content",imageComponent:"Image Content"};this.setState((function(s){var a=Object(o.a)({},s);return a.postData[t]=e,"locationChooser"==t&&(a.postData[t]=e),a.addedInformation=!0,a.whichInfo=n[t],a}))}},{key:"select",value:function(t){this.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{selected:t})}))}},{key:"handleSuccessClose",value:function(){this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{success:null})}))}},{key:"handleInfoClose",value:function(){this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{addedInformation:!1})}))}},{key:"prepareObjectToSend",value:function(){var t={title:this.state.postData.textChooser.title,story:this.state.postData.textChooser.body,owner:this.state.postData.owner,locations:this.state.postData.locationChooser,startYear:this.state.postData.timeChooser.startYear,endYear:this.state.postData.timeChooser.endYear,startMonth:this.state.postData.timeChooser.startMonth,endMonth:this.state.postData.timeChooser.endMonth,startDay:this.state.postData.timeChooser.startDay,endDay:this.state.postData.timeChooser.endDay,startTime:this.state.postData.timeChooser.startTime,endTime:this.state.postData.timeChooser.endTime,tags:this.state.postData.tagChooser.selectedTags,preview:this.state.postData.imageComponent},e={};for(var n in t)t[n]&&(e[n]=t[n]);return e}},{key:"sendToBackend",value:function(){var t,e=this,n=this.prepareObjectToSend(),s=(t=n,Object.keys(t).reduce((function(e,n){if(n.includes("Year"))e.append("year",t[n]);else if(n.includes("Month"))e.append("month",t[n]);else if(n.includes("Day"))e.append("day",t[n]);else if("locations"==n)for(var s in t[n])e.append(n,JSON.stringify(t[n][s]));else if("tags"==n)for(var a in t[n])e.append(n,t[n][a]);else e.append(n,t[n]);return e}),new FormData)),a=0;for(var i in n.preview)n.preview[i]instanceof File&&(a=1,s.append("images",n.preview[i]));a||s.set("images",[]),fetch("http://".concat("3.67.83.253",":8000/api/post/create"),{method:"POST",headers:{Authorization:"JWT ".concat(localStorage.getItem("access"))},body:s}).then((function(t){200!=t.status?(console.log("ERROR"+t.data),e.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{success:!1,creationError:"Response Status:  ".concat(t.status," \n")+JSON.stringify(t)})}))):(console.log("Post SUCCESS."),e.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{success:!0})})))})).catch((function(t){e.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{success:!1,creationError:t})})),console.log("ERRRor"+t)}))}},{key:"render",value:function(){var t=this;return Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{class:"row2 someSpacing",children:[Object(v.jsxs)("div",{class:"inputArea",children:[Object(v.jsxs)("div",{class:"Story"!=this.state.selected?"hide":"",children:[Object(v.jsx)(R,{ref:this.refStory,parentHandler:this.handleChildObjectSend})," "]}),Object(v.jsx)("div",{class:"Location"!=this.state.selected?"hide":"",children:Object(v.jsx)(G,{ref:this.refLocation,parentHandler:this.handleChildObjectSend})}),Object(v.jsx)("div",{class:"Time"!=this.state.selected?"hide":"",children:Object(v.jsx)(L,{ref:this.refTime,parentHandler:this.handleChildObjectSend})}),Object(v.jsx)("div",{class:"People"!=this.state.selected?"hide":"",children:Object(v.jsx)(H,{parentHandler:this.handleChildObjectSend})}),Object(v.jsx)("div",{class:"Tags"!=this.state.selected?"hide":"",children:Object(v.jsx)(F,{ref:this.refTags,parentHandler:this.handleChildObjectSend})}),Object(v.jsx)("div",{class:"Images"!=this.state.selected?"hide":"",children:Object(v.jsx)(Y,{parentHandler:this.handleChildObjectSend})}),"Preview"==this.state.selected&&Object(v.jsx)("div",{children:Object(v.jsx)(W,{postObject:this.prepareObjectToSend(),parentHandler:this.handleChildObjectSend},this.state.postData.owner)})]}),Object(v.jsxs)("div",{class:"buttons col",children:[Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Story")},children:"Story"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Location")},children:"Location"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Time")},children:"Time"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Tags")},children:"Tags"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Images")},children:"Images"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.refStory.current.sendParent(),t.refLocation.current.sendParent(),t.refTime.current.sendParent(),t.refTags.current.sendParent(),t.select("Preview")},children:"Preview"})]}),Object(v.jsx)(O.a,{open:0==this.state.success,autoHideDuration:1e3,onClose:this.handleSuccessClose,children:Object(v.jsxs)(f.a,{onClose:this.handleSuccessClose,severity:"error",sx:{width:"100%"},children:["Your post could not be created. See below for the error message:",this.state.creationError]})}),Object(v.jsx)(O.a,{open:this.state.success,autoHideDuration:1e3,onClose:this.handleSuccessClose,children:Object(v.jsx)(f.a,{onClose:this.handleSuccessClose,severity:"success",sx:{width:"100%"},children:"Your post is successfully created."})}),Object(v.jsx)(g.b,{to:"/createPost",variant:"v6",children:Object(v.jsx)(b.a,{onClick:function(){t.refStory.current.sendParent(),t.refLocation.current.sendParent(),t.refTime.current.sendParent(),t.refTags.current.sendParent(),setTimeout(t.sendToBackend,10)},class:"circle homePageCreatePostButton",path:p.o,title:"Post",size:2,color:"black"})})]})})}}]),n}(a.a.Component),Y=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).handleFileChange=s.handleFileChange.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"handleFileChange",value:function(t){this.props.parentHandler("imageComponent",t.target.files)}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{children:"Please select suitable images for the post using the button below."}),Object(v.jsx)("input",{type:"file",id:"file",accept:".jpg, .png",multiple:!0,onChange:this.handleFileChange})]})}}]),n}(a.a.Component),W=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).state={value:t},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)(B,Object(o.a)({},this.props.postObject))})}}],[{key:"getDerivedStateFromProps",value:function(t,e){return e.value!==t?{value:t}:null}}]),n}(a.a.Component),J=U,Q=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;Object(r.a)(this,n),s=e.call(this,t),console.log(window.location.href);var i=window.location.href,c=i.search(/id=/g),o=parseInt(i.slice(c+3));return console.log(i.slice(c+3)),s.refStory=a.a.createRef(),s.refLocation=a.a.createRef(),s.refTime=a.a.createRef(),s.refTags=a.a.createRef(),s.allRefs=[s.refStory,s.refLocation,s.refTime,s.refTags],s.state={id:o,selected:"Story",postData:{textChooser:{title:" ",body:" "},locationChooser:[],timeChooser:{startYear:null,endYear:null,startMonth:null,endMonth:null,startDay:null,endDay:null,startTime:null,endTime:null},tagChooser:{selectedTags:[]},owner:"USER",imageComponent:null}},s.handleChildObjectSend=s.handleChildObjectSend.bind(Object(h.a)(s)),s.select=s.select.bind(Object(h.a)(s)),s.sendToBackend=s.sendToBackend.bind(Object(h.a)(s)),s.handleSuccessClose=s.handleSuccessClose.bind(Object(h.a)(s)),s.handleInfoClose=s.handleInfoClose.bind(Object(h.a)(s)),s.prepareObjectToSend=s.prepareObjectToSend.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;A("/api/post/get/".concat(this.state.id),{}).then((function(t){return t.json()})).then((function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{postData:Object(o.a)(Object(o.a)({},t.postData),{},{owner:e.owner})})})),t.refLocation.current.getEditInfo(e),e.locations=e.locations.map((function(t,e){return t[0]})),console.log(e),t.refStory.current.getEditInfo(e),t.refTags.current.getEditInfo(e),t.refTime.current.getEditInfo(e)}))}},{key:"handleChildObjectSend",value:function(t,e){var n={textChooser:"Story text Content",locationChooser:"Location Content",timeChooser:"Time Content",peopleChooser:"People Content",tagChooser:"Tag Content",imageComponent:"Image Content"};this.setState((function(s){var a=Object(o.a)({},s);return a.postData[t]=e,"locationChooser"==t&&(a.postData[t]=e),a.addedInformation=!0,a.whichInfo=n[t],a}))}},{key:"select",value:function(t){this.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{selected:t})}))}},{key:"handleSuccessClose",value:function(){this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{success:null})}))}},{key:"handleInfoClose",value:function(){this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{addedInformation:!1})}))}},{key:"prepareObjectToSend",value:function(){var t={title:this.state.postData.textChooser.title,story:this.state.postData.textChooser.body,owner:this.state.postData.owner,locations:this.state.postData.locationChooser,startYear:this.state.postData.timeChooser.startYear,endYear:this.state.postData.timeChooser.endYear,startMonth:this.state.postData.timeChooser.startMonth,endMonth:this.state.postData.timeChooser.endMonth,startDay:this.state.postData.timeChooser.startDay,endDay:this.state.postData.timeChooser.endDay,startTime:this.state.postData.timeChooser.startTime,endTime:this.state.postData.timeChooser.endTime,tags:this.state.postData.tagChooser.selectedTags,preview:this.state.postData.imageComponent},e={};for(var n in t)t[n]&&(e[n]=t[n]);return e}},{key:"sendToBackend",value:function(){var t,e,n=this,s=this.prepareObjectToSend(),a=(e=s,Object.keys(e).reduce((function(t,n){if(n.includes("Year"))t.append("year",e[n]);else if(n.includes("Month"))t.append("month",e[n]);else if(n.includes("Day"))t.append("day",e[n]);else if("locations"==n)for(var s in e[n])t.append(n,JSON.stringify(e[n][s]));else if("tags"==n)for(var a in e[n])t.append(n,e[n][a]);else t.append(n,e[n]);return t}),new FormData));console.log(a.getAll("tags"));var i=0;for(var c in s.preview)s.preview[c]instanceof File&&(i=1,a.append("images",s.preview[c]));i||a.set("images",[]),(t=console).log.apply(t,Object(_.a)(a)),fetch("http://".concat("3.67.83.253",":8000/api/post/put/").concat(this.state.id),{method:"PUT",headers:{Authorization:"JWT ".concat(localStorage.getItem("access"))},body:a}).then((function(t){200!=t.status?(console.log("ERROR"+t.data),n.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{success:!1,creationError:"Response Status:  ".concat(t.status," \n")+JSON.stringify(t)})}))):(console.log("Post SUCCESS."),n.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{success:!0})})))})).catch((function(t){n.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{success:!1,creationError:t})})),console.log("ERRRor"+t)}))}},{key:"render",value:function(){var t=this;return Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{class:"row2 someSpacing",children:[Object(v.jsxs)("div",{class:"inputArea",children:[Object(v.jsxs)("div",{class:"Story"!=this.state.selected?"hide":"",children:[Object(v.jsx)(R,{ref:this.refStory,parentHandler:this.handleChildObjectSend})," "]}),Object(v.jsx)("div",{class:"Location"!=this.state.selected?"hide":"",children:Object(v.jsx)(G,{ref:this.refLocation,parentHandler:this.handleChildObjectSend})}),Object(v.jsx)("div",{class:"Time"!=this.state.selected?"hide":"",children:Object(v.jsx)(L,{ref:this.refTime,parentHandler:this.handleChildObjectSend})}),Object(v.jsx)("div",{class:"People"!=this.state.selected?"hide":"",children:Object(v.jsx)(H,{parentHandler:this.handleChildObjectSend})}),Object(v.jsx)("div",{class:"Tags"!=this.state.selected?"hide":"",children:Object(v.jsx)(F,{ref:this.refTags,parentHandler:this.handleChildObjectSend})}),Object(v.jsx)("div",{class:"Images"!=this.state.selected?"hide":"",children:Object(v.jsx)(V,{parentHandler:this.handleChildObjectSend})}),"Preview"==this.state.selected&&Object(v.jsx)("div",{children:Object(v.jsx)(K,{postObject:this.prepareObjectToSend(),parentHandler:this.handleChildObjectSend},this.state.postData.owner)})]}),Object(v.jsxs)("div",{class:"buttons col",children:[Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Story")},children:"Story"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Location")},children:"Location"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Time")},children:"Time"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Tags")},children:"Tags"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.select("Images")},children:"Images"}),Object(v.jsx)("button",{class:"createPostBtn",onClick:function(){t.refStory.current.sendParent(),t.refLocation.current.sendParent(),t.refTime.current.sendParent(),t.refTags.current.sendParent(),t.select("Preview")},children:"Preview"})]}),Object(v.jsx)(O.a,{open:0==this.state.success,autoHideDuration:5e3,onClose:this.handleSuccessClose,children:Object(v.jsxs)(f.a,{onClose:this.handleSuccessClose,severity:"error",sx:{width:"100%"},children:["Your post could not be created. See below for the error message:",this.state.creationError]})}),Object(v.jsx)(O.a,{open:this.state.success,autoHideDuration:5e3,onClose:this.handleSuccessClose,children:Object(v.jsx)(f.a,{onClose:this.handleSuccessClose,severity:"success",sx:{width:"100%"},children:"Your post is successfully created."})}),Object(v.jsx)(g.b,{to:"/editPost?id=".concat(this.state.id),variant:"v6",children:Object(v.jsx)(b.a,{onClick:function(){t.refStory.current.sendParent(),t.refLocation.current.sendParent(),t.refTime.current.sendParent(),t.refTags.current.sendParent(),setTimeout(t.sendToBackend,10)},class:"circle homePageCreatePostButton",path:p.o,title:"Post",size:2,color:"black"})})]})})}}]),n}(a.a.Component),V=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).handleFileChange=s.handleFileChange.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"handleFileChange",value:function(t){this.props.parentHandler("imageComponent",t.target.files)}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{children:"Please select suitable images for the post using the button below."}),Object(v.jsx)("input",{type:"file",id:"file",accept:".jpg, .png",multiple:!0,onChange:this.handleFileChange})]})}}]),n}(a.a.Component),K=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).state={value:t},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)(B,Object(o.a)({},this.props.postObject))})}}],[{key:"getDerivedStateFromProps",value:function(t,e){return e.value!==t?{value:t}:null}}]),n}(a.a.Component),Z=Q,X=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,661)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),s(t),a(t),i(t),c(t)}))},q=n.p+"static/media/postory_logo_no_text.ec3bad21.png",$={float:"left",height:"100%",width:"75%",margin:0,padding:0,boxSizing:"border-box",border:"1px solid black"},tt={float:"right",height:"100%",width:"25%",margin:0,padding:0,backgroundColor:"white",boxSizing:"border-box",border:"1px solid black"},et={maxHeight:"100%",maxWidth:"100%"},nt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).showPopup=function(){s.setState({popupState:!0})},s.closePopup=function(){s.setState({popupState:!1})},s.props=t,s.state={popupState:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{style:{height:"100%",width:"100%"},children:[Object(v.jsx)("input",{type:"text",placeholder:" Search",name:"input",style:$}),Object(v.jsx)("button",{style:tt,children:Object(v.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAACDElEQVRo3u2Zu0oDQRSGPyOpDBjtJGgnUSxVEDRleht9AX0FL53aaWWh+BDaWHqJEQufIYqFoIhYR7AQjMXsYjy72exmdmZF5ocpzlzO/P+cmdk5LDg4ODhkiT6NsWVgEagCJWDUq38GXoBL4BS4z1qkxAxwBbRilltgPmvSAHngCPhKQN4vX8Ch5yMTDAPXPRCXpQ4M2SafjyB/DqygzsOAV8rAqtfWSYTVSByFkGgACzHGLnh95fgDW+RnCe75OjCYwMegN0aeiWkbAuTEjYTkfRQJRuLSNPlJgqGPs206YY5gNMsmBWwQPLC6kAd7TddhLqKtKuzjFAScdJkjVdyTfrjLwuedSQFNMVkhBZ8F4bOp6zBqC7UMLIqcT3uOKAGvwi6lIGBE2G8mBTwJW+cK9VER9qNJAfJDs5yCgCVh11Lw2RHyxtD9kFVC/E2ZFADBxKWBehYkRRF1Zbb7OjNNHlT2pfuYKxL+mLOWpR0SDH3c53SF4Mq3gH1b5EElH3IF299Hq8AEPwnNBNEJzScwZlMAqDSwk4gk5VPY2zZF5FGZVK9J/b638rLNqghQmVQtAfkzfh/YsD7WRQCMo97zF6hD3QTegQevbp3we377L4noFTJZ8stu1sScCCfCibAsItfdrzXsAZsh9R9ZE0uK9khsdevcnzXbENyi/hzdADtZk3FwcHD45/gGXt0wm+DsVU8AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMTEtMDRUMjI6Mzc6MjQrMDA6MDAxZtpbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIxLTExLTA0VDIyOjM3OjI0KzAwOjAwQDti5wAAAABJRU5ErkJggg==",style:et,onClick:this.showPopup})}),Object(v.jsx)(O.a,{open:this.state.popupState,autoHideDuration:3e3,onClose:this.closePopup,children:Object(v.jsx)(f.a,{onClose:this.closePopup,severity:"info",sx:{width:"100%"},children:"This feature is not available now and coming soon, thanks heaps for your patience!"})})]})}}]),n}(a.a.Component),st={position:"fixed",width:"100%",height:"50px",backgroundColor:"rgb(235, 235, 235)"},at={float:"left",height:"100%",marginLeft:"10px",marginRight:"10px"},it={float:"right",height:"100%",marginLeft:"10px",marginRight:"10px"},ct={maxHeight:"100%",maxWidth:"100%"},ot={margin:0,fontSize:"2.5em",fontFamily:"Bebas Neue",color:"#ff914d"},rt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).showPopup=function(){s.setState({popupState:!0})},s.closePopup=function(){s.setState({popupState:!1})},s.props=t,s.state={popupState:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{style:st,children:[Object(v.jsx)("style",{children:"@import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap');"}),Object(v.jsx)("div",{style:at,children:Object(v.jsx)(nt,{})}),Object(v.jsx)("a",{href:"/",style:at,children:Object(v.jsx)("img",{src:q,alt:"Postory",style:ct})}),Object(v.jsx)("a",{href:"/",style:Object(o.a)(Object(o.a)({},at),{},{textDecoration:"none"}),children:Object(v.jsx)("p",{style:ot,children:"POSTORY"})}),Object(v.jsx)("div",{style:it,children:Object(v.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAPUlEQVRo3u3VsQ0AIAwDsML/P8MHCKlDhtprlmRKFQDAXOuRnXS5n6473arLAIDZPHGaAQCzeeI0AwAAyLkgggMWE5+mSgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0xMS0wNFQxMTozMDozMiswMDowML1rvZMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMTEtMDRUMTE6MzA6MzIrMDA6MDDMNgUvAAAAAElFTkSuQmCC",alt:"Menu",style:ct,onClick:this.showPopup})}),Object(v.jsx)(g.b,{class:"push",to:"/discover",children:Object(v.jsx)("div",{style:it,children:Object(v.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAADnklEQVRo3u2Zz0tVQRTHP1n5qzTUfohaWhSu2qSIJS2s/oVQW9amRe0iqUU+C1KqXaX+A24rMAtaCLUoiKQ2BQqSPwufWgtf+CTRFnMv3M6dO85979Z70fvCLObOd86cOfPjnnMGcsjh/8aWiOTkAU1AK9AA1APVwA5njATwBRgDRoER4C2wnmkDVAM9wAywEbLMOH1rMqF4BdAHJFNQXJZVoB/Y/beUbwcWIlBclkVH9h/DNsdSQQqsab49A55bct0yAGyPWvkiYChgwCngCnBXfF8GaoE61CH2tvUCncBsgMxhoDhKy+uU/wnEHGsVAfOi/YZHRky0zQEFQD5wO2BFnka1ErptMwE0ejgXRfs8UOJpLwHignPB094MTGrG6U9X+TaN0HH8V98ng/VddAnOB9F+wDGMHK8tVeUr8N82E0CV4B0VnBVgr0bePvzX7hHB2a9ZiQVHl9Dow7/nmzW8bsF7ZJD5WHCvajgt+M/Ew7DK16B+MF4hsQCu3D6mu7xDcN8E8G4J3ipqi1mjB/9ezHTpsVU+D5jOAoVlmQW22kygOQuUDSpNOmtLtNouVQZwymYCjaJ+CeXT68orwT1t4LrljOjz0sC9LLgNNhOoF/X3BouUifq0hRVnRL3cwJVj12OBJX7fd5UG7pzg7rKQX47/cAahSnAXbCYg7/9CA3dFcG2cr3zRZ8XALRTcpCTkkR420uwP5rh4U/10hISolxn6fxN1Gx9+5yYyTGMv20zgq6gfDDGBPRYTkLHvdwO3bhPdtBMYF/VjISZg469IzpKBK8ces5DPdTL/xw0qnTYrMGIzywzBSrdsdeamdAbXrcA6MJhpU2swSIhUpC6guRnA/Sh4HQa55wT3dQBPBjRJVBozFGQ2Yg04oeGFCSmfCK4upDyJP6S8H1Z5UPf1ohD0GRV4eyGD+iQqgJeoxL+qhwWnFv/5i2N2+Ixox3+YJvDf5TIu7tLIigmO9DTrHAPJ8c6mqryLAY3QSeC4hyMTW3Gg1NNeij9Fc97T3oL+5nuQrvKgPMxhjfA1VFqwAH1qsdsjQx5KN7VYCNxBn1ocQqU1I0FxwCRcf74TuCe+J1B+1CHgh2jrBa6hXm10MoeIMLnrXYmw6fUXTrHherdNZJbXoY0/88ARJ4IDa4sKVLoviiemJOqeT/mqTAfuI18qvtM06hII/Yf1Ispn1kZU3sb7zOpGXwnUYR8H3qG8ylGy4Jk1hxz+dfwCsHG7gYMjfesAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMTEtMDRUMTE6MzA6MDQrMDA6MDBQNI9KAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIxLTExLTA0VDExOjMwOjA0KzAwOjAwIWk39gAAAABJRU5ErkJggg==",alt:"Discover",style:ct})})}),Object(v.jsx)(g.b,{to:"/",ariant:"v6",children:Object(v.jsx)("a",{href:"/",style:it,children:Object(v.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAABDElEQVRo3u2XMQ4BQRhGHxGNRKvWuIAb6FyBQyhdQesOXEHnBi6gUW8r0WzBamYS2WB3dv7178r/ktfIkm8y5AUYhmH8Kx1gA2yBrvaYUPrAHsicO/daKxgAh5fx3iMw1B5XxAg4vRnvPblnGskYOH8Z770AE+2xeaZAUmK8N3HvaQQz4Bow3nsD5trjl0BaYbw3BRZa41fAPWK89wGsfzncByp2eN6fBC8fKGlrDd6nQElbS/CKAiWtaPDKBkpakeCFBkraqOBVDZS0lYIXGyhpg4InFShp3wavE3ArWeg1RlJqW+v+6tkBmkavhs8s+u6K/pZafwN2AG3sANrYAbSxA2hjBzAMwzAMTZ4cWmjLg6gRpgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0xMS0wNFQxMToyOToyNCswMDowMC+KfD0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMTEtMDRUMTE6Mjk6MjQrMDA6MDBe18SBAAAAAElFTkSuQmCC",alt:"Postory",style:ct})})}),Object(v.jsx)(O.a,{open:this.state.popupState,autoHideDuration:3e3,onClose:this.closePopup,children:Object(v.jsx)(f.a,{onClose:this.closePopup,severity:"info",sx:{width:"100%"},children:"This feature is not available now and coming soon, thanks heaps for your patience!"})})]})}}]),n}(a.a.Component),lt=n(301),dt=n.n(lt),ut=n(13),ht=Object(z.withScriptjs)(Object(z.withGoogleMap)((function(t){var e=a.a.useState([]),n=Object(I.a)(e,2),i=n[0],c=n[1],o=a.a.useState([]),r=Object(I.a)(o,2),l=r[0],d=r[1],u=a.a.useState(null),h=Object(I.a)(u,2),j=h[0],O=h[1],f=a.a.useState({lat:41.048,lng:29.051}),g=Object(I.a)(f,2),x=g[0],m=g[1],C=a.a.useState(!1),S=Object(I.a)(C,2),y=(S[0],S[1]),w=a.a.useState(0),T=Object(I.a)(w,2),k=T[0],P=T[1],D=a.a.useState(!1),E=Object(I.a)(D,2),B=E[0],M=E[1];Object(s.useEffect)((function(){A("/api/post/all/discover",{}).then((function(t){return t.json()})).then((function(t){d(t);for(var e=[],n=0;n<t.length;n++){console.log(t[n]);for(var s=t[n].id,a=0;a<t[n].locations.length;a++){var i=t[n].locations[a][1],o=t[n].locations[a][2];e.push({id:s,lat:i,lng:o})}}console.log(e),c(e)}))}),[]),Object(s.useEffect)((function(){null!=j&&(M(!1),setTimeout((function(){M(!0)}),500)),console.log("Selected post has been changed")}),[k]);return Object(v.jsxs)(z.GoogleMap,{defaultZoom:6,defaultCenter:{lat:41.048,lng:29.051},children:[B&&Object(v.jsx)(dt.a,{defaultPosition:{lat:x.lat,lng:x.lng},options:{closeBoxURL:"",enableEventPropagation:!0},children:Object(v.jsxs)("div",{style:{backgroundColor:"white",opacity:1,padding:"12px"},onClick:function(){null!=j&&(y(!1),setTimeout((function(){y(!0)}),500))},children:[Object(v.jsx)("div",{style:{fontSize:"16px",fontColor:"#08233B",fontWeight:"bold"},children:j.title}),Object(v.jsxs)("div",{style:{fontSize:"12px",fontColor:"#08233B",fontStyle:"italic"},children:["by: ",j.username]}),Object(v.jsxs)("div",{class:"row2",onClick:function(){return t.redirect(j.id)},children:[Object(v.jsx)(b.a,{path:p.j,size:1}),Object(v.jsx)("div",{style:{fontSize:"10px",fontColor:"#C40303"},children:"Click here to be redirected to the post page."})]})]})}),i.map((function(t,e){return Object(v.jsx)(z.Marker,{onClick:function(){return function(t,e){m({lat:e.lat,lng:e.lng}),O((function(){for(var e=null,n=0;n<l.length;n++)l[n].id==i[t].id&&(e=l[n]);return console.log(e),P(k+1),e}))}(e,t)},position:{lat:t.lat,lng:t.lng}},e)}))]})}))),jt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).state={selectedPost:null},s}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=Object({NODE_ENV:"production",PUBLIC_URL:"/2021SpringGroup9",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_API_KEY?"key="+Object({NODE_ENV:"production",PUBLIC_URL:"/2021SpringGroup9",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_API_KEY+"&":"";return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("header",{className:"App-header",children:Object(v.jsx)(ht,{redirect:function(e){return t.setState({selectedPost:e})},isMarkerShown:!0,googleMapURL:"https://maps.googleapis.com/maps/api/js?".concat(e,"v=3.exp&libraries=geometry,drawing,places"),loadingElement:Object(v.jsx)("div",{style:{height:"100%"}}),containerElement:Object(v.jsx)("div",{style:{height:5*window.innerHeight/6,width:window.innerWidth}}),mapElement:Object(v.jsx)("div",{style:{height:"100%"}})})}),this.state.selectedPost&&Object(v.jsx)(ut.a,{class:"push",to:"/viewPost?id=".concat(this.state.selectedPost),children:" click here to see the full post"})]})}}]),n}(a.a.Component),bt=(n(235),n(624),n(302));var pt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).state={username:null,email:null,password:null,incorrect:!1,completed:!1,redirect:!1},s.handleButtonClick=s.handleButtonClick.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"handleButtonClick",value:function(t){var e=this;t.target.disabled||m("/auth/jwt/create/",{email:this.state.email,password:this.state.password}).then((function(t){2===Math.floor(t.status/100)?t.json().then((function(t){var e=t.refresh,n=t.access;localStorage.setItem("refresh",e),localStorage.setItem("access",n)})).then((function(){return e.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{completed:!0})}))})):e.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{incorrect:!0})}))}))}},{key:"render",value:function(){var t=this;if(this.state.completed){var e=Object(bt.a)(localStorage.getItem("access"));return localStorage.setItem("userID",e.user_id),setTimeout((function(){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{redirect:!0})}))}),2e3),Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{id:"signin",children:[Object(v.jsx)("span",{children:"Sign in success."}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"Redirecting to homepage.."}),this.state.redirect&&Object(v.jsx)(ut.a,{to:"/"})]})})}return Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{id:"signin",children:[Object(v.jsx)("label",{htmlFor:"signin-username",id:"signin-username-text",children:"Username or E-mail: "}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"text",id:"signin-username",onChange:function(e){var n=e.target.value;!function(t){return/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(t)}(n)?t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{username:n})})):t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:n})}))}}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{htmlFor:"signin-password",id:"signin-password-text",children:"Password: "}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"password",id:"signin-password",onChange:function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))}}),Object(v.jsx)("br",{}),this.state.incorrect&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{id:"signin-incorrect-text",style:{fontSize:"50%"},children:"Incorrect username or password"}),Object(v.jsx)("br",{})]}),Object(v.jsx)("button",{id:"signin-button",disabled:(this.state.username||this.state.email)&&this.state.password?"":"true",onClick:this.handleButtonClick,children:"Sign In"}),Object(v.jsx)("br",{}),Object(v.jsx)(g.b,{to:"/forgotPassword",id:"signin-forgot-link",variant:"v6",children:"Forgot password?"}),Object(v.jsx)("br",{}),Object(v.jsx)(g.b,{to:"/signUp",id:"signin-signup-link",variant:"v6",children:"Sign Up"})]})})}}]),n}(a.a.Component);n(625);function Ot(t){return/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(t)}function ft(t){return t.length<6?"Username should be 6 characters or longer":/^[a-zA-Z0-9\s]+$/.test(t)?"":"Username should only contain alphanumerical characters and whitespace"}function gt(t){return t.length<8?"Password should be 8 characters or longer":/[a-z]/.test(t)?/[A-Z]/.test(t)?/[0-9]/.test(t)?/^[a-zA-Z0-9]+$/.test(t)?"Password should contain a special character":"":"Password should contain a number":"Password should contain an uppercase letter":"Password should contain a lowercase letter"}var xt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).state={username:null,name:null,surname:null,email:null,password1:null,password2:null,status:"before",redirect:!1},s.handleButtonClick=s.handleButtonClick.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"handleButtonClick",value:function(t){var e,n,s=this;t.target.disabled||(e="/auth/users/",n={email:this.state.email,name:this.state.name,surname:this.state.surname,username:this.state.username,password:this.state.password1,re_password:this.state.password2},e.startsWith("/")&&(e=e.substring(1)),fetch("".concat(x,"/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})).then((function(t){2===Math.floor(t.status/100)?s.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{status:"success"})})):s.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{status:"fail"})}))}))}},{key:"render",value:function(){var t=this;return"success"===this.state.status?(setTimeout((function(){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{redirect:!0})}))}),2e3),localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{id:"signup",children:[Object(v.jsx)("span",{children:"Account created successfully."}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"Check your inbox to activate your account."}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"Redirecting to sing in page."}),this.state.redirect&&Object(v.jsx)(ut.a,{to:"/signIn"})]})})):"fail"===this.state.success?Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{id:"signup",children:[Object(v.jsx)("span",{children:"This user already exists!"}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{id:"signup-goback-link",onClick:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{status:"before"})}))},children:"Go back"})]})}):Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{id:"signup",children:[Object(v.jsx)("label",{htmlFor:"signup-email",id:"signup-email-text",children:"E-mail: "}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"text",id:"signup-email",onChange:function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))}}),Object(v.jsx)("br",{}),this.state.email&&!Ot(this.state.email)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{id:"signup-email-problem-text",children:" Please enter a vaild e-mail"}),Object(v.jsx)("br",{})]}),Object(v.jsx)("label",{htmlFor:"signup-username",id:"signup-username-text",children:"Username: "}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"text",id:"signup-username",onChange:function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{username:e.target.value})}))}}),Object(v.jsx)("br",{}),this.state.username&&ft(this.state.username)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{id:"signup-username-problem-text",children:ft(this.state.username)}),Object(v.jsx)("br",{})]}),Object(v.jsx)("label",{htmlFor:"signup-name",id:"signup-name-text",children:"Name: "}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"text",id:"signup-name",onChange:function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{name:e.target.value})}))}}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{htmlFor:"signup-surname",id:"signup-surname-text",children:"Surname: "}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"text",id:"signup-surname",onChange:function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{surname:e.target.value})}))}}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{htmlFor:"signup-password1",id:"signup-password1-text",children:"Password: "}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"password",id:"signup-password1",onChange:function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{password1:e.target.value})}))}}),Object(v.jsx)("br",{}),this.state.password1&&gt(this.state.password1)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{id:"signup-password1-problem-text",children:gt(this.state.password1)}),Object(v.jsx)("br",{})]}),Object(v.jsx)("label",{htmlFor:"signup-password2",id:"signup-password2-text",children:"Repeat password: "}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"password",id:"signup-password2",onChange:function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{password2:e.target.value})}))}}),Object(v.jsx)("br",{}),this.state.password2&&this.state.password1!==this.state.password2&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{id:"signup-password2-problem-text",children:"Passwords don't match"}),Object(v.jsx)("br",{})]}),Object(v.jsx)("button",{id:"signup-button",disabled:this.state.email&&this.state.username&&this.state.name&&this.state.surname&&this.state.password1&&this.state.password2&&Ot(this.state.email)&&!ft(this.state.username)&&!gt(this.state.password1)&&this.state.password1===this.state.password2?"":"true",onClick:this.handleButtonClick,children:"Sign Up"}),Object(v.jsx)("br",{}),Object(v.jsx)(g.b,{to:"/signIn",id:"signup-signin-link",variant:"v6",children:"Sign in instead"})]})})}}]),n}(a.a.Component),mt=(n(626),n(627),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;Object(r.a)(this,n),s=e.call(this,t);var a=window.location.href,i=a.search(/id=/g),c=parseInt(a.slice(i+3));return s.state={id:c,api_key:""},void 0!=Object({NODE_ENV:"production",PUBLIC_URL:"/2021SpringGroup9",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_API_KEY&&(s.state={id:c,api_key:"key="+Object({NODE_ENV:"production",PUBLIC_URL:"/2021SpringGroup9",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_API_KEY+"&"}),A("/api/post/get/".concat(s.state.id),{}).then((function(t){return t.json()})).then((function(t){s.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{post:t})}))})),s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"App App-header",children:[Object(v.jsx)("div",{style:{height:1*window.innerHeight/20,width:window.innerWidth}}),Object(v.jsxs)("div",{class:"row2",children:[Object(v.jsxs)("div",{children:[this.state.post&&Object(v.jsx)(B,Object(o.a)({},this.state.post)),this.state.post&&Object(v.jsx)(vt,{id:this.state.id,comments:this.state.post.comments})]}),Object(v.jsxs)("div",{children:[this.state.post&&Object(v.jsx)(St,{isMarkerShown:!0,googleMapURL:"https://maps.googleapis.com/maps/api/js?".concat(this.state.api_key,"v=3.exp&libraries=geometry,drawing,places"),loadingElement:Object(v.jsx)("div",{style:{height:"100%"}}),containerElement:Object(v.jsx)("div",{style:{width:"500px",height:"300px"}}),mapElement:Object(v.jsx)("div",{style:{height:"100%"}}),markers:this.state.post.locations.map((function(t,e){return{name:t[0],lat:t[1],lng:t[2]}}))}),this.state.post&&this.state.post.images&&this.state.post.images.length>0&&Object(v.jsx)(Ct,{images:this.state.post.images})]})]})]})}}]),n}(a.a.Component)),At=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).state={userName:t.info[1],userProfilePic:"",text:t.info[2]},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{class:"Comment",children:[Object(v.jsxs)("div",{class:"row2",children:[Object(v.jsx)("img",{class:"circle",width:"50px",height:"50px",src:"./static/media/postory_logo_no_text.ec3bad21.png"}),Object(v.jsx)("a",{style:{margin:"10px"},children:this.state.userName})]}),Object(v.jsx)("a",{class:"mainContent",children:this.state.text})]})}}]),n}(a.a.Component),vt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).props=t,s.state={comments:t.comments,currentUserName:"Me"},s.textChange=s.textChange.bind(Object(h.a)(s)),s.sendComment=s.sendComment.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"textChange",value:function(t){this.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{text:t.target.value})}))}},{key:"sendComment",value:function(){this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{comments:t.comments.concat([["x","Me",t.text]])})})),m("/api/post/comment/".concat(this.props.id),{comment:this.state.text}),console.log("Send ".concat(this.state.text," to backend"))}},{key:"render",value:function(){return Object(v.jsxs)("div",{class:"CommentContainer",children:[this.state.comments.map((function(t,e){return Object(v.jsx)(At,{info:t},e)})),Object(v.jsxs)("div",{class:"row2",children:[Object(v.jsx)("textarea",{style:{width:400},type:"text",onChange:this.textChange}),Object(v.jsx)(b.a,{onClick:this.sendComment,path:p.o,title:"Post",size:1,color:"black"})]})]})}}]),n}(a.a.Component),Ct=function(t){var e=a.a.useState(0),n=Object(I.a)(e,2),s=n[0],i=n[1];return Object(v.jsxs)("div",{className:"sliderContainer",children:[Object(v.jsx)(b.a,{className:"sliderLeft",onClick:function(){i((function(e){return(e-=1)<0&&(e+=t.images.length),e}))},path:p.b,title:"Post",size:2,color:"black"}),Object(v.jsx)(b.a,{className:"sliderRight",onClick:function(){i((function(e){return e+=1,e%=t.images.length}))},path:p.c,title:"Post",size:2,color:"black"}),t.images.length>0&&Object(v.jsx)("img",{src:t.images[s]})]})},St=Object(z.withScriptjs)(Object(z.withGoogleMap)((function(t){return Object(v.jsx)("div",{children:Object(v.jsx)(z.GoogleMap,{defaultZoom:0,defaultCenter:{lat:41,lng:28},children:t.markers.map((function(t,e){return Object(v.jsx)(z.Marker,{position:t,options:{icon:"https://mt.google.com/vt/icon/text=".concat(t.name+"("+(e+1)+")","&psize=16&font=fonts/arialuni_t.ttf&color=ff330000&name=icons/spotlight/spotlight-waypoint-b.png&ax=44&ay=48&scale=1")}},e)}))})})}))),yt=mt;n(634),n(635);function wt(t){return/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(t)}var Tt="http://"+window.location.hostname+":8000",kt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).state={email:null,password:null,incorrect:!1,success:!1},s.handleButtonClick=s.handleButtonClick.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"handleButtonClick",value:function(t){var e=this;t.target.disabled||fetch("".concat(Tt,"/auth/users/reset_password/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.state.email})}).then((function(t){2===Math.floor(t.status/100)&&e.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{success:!0})}))}))}},{key:"render",value:function(){var t=this;return this.state.success?Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{id:"forgot",children:[Object(v.jsx)("span",{children:"Reset e-mail sent successfully."}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"Check your inbox to reset your password"}),Object(v.jsx)("br",{}),Object(v.jsx)(g.b,{to:"/signIn",id:"forgot-link",variant:"v6",children:"Go back"})]})}):Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{id:"forgot",children:[Object(v.jsx)("label",{htmlFor:"forgot-email",id:"forgot-email-text",children:"E-mail of your account"}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"text",id:"forgot-email",value:this.state.email,onChange:function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))}}),Object(v.jsx)("br",{}),this.state.email&&!wt(this.state.email)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{style:{fontSize:"50%"},children:" Please enter a valid e-mail "}),Object(v.jsx)("br",{})]}),this.state.email&&!wt(this.state.email)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{style:{fontSize:"50%"},children:" Please enter a valid e-mail "}),Object(v.jsx)("br",{})]}),Object(v.jsx)("button",{id:"forgot-button",disabled:wt(this.state.email)?"":"true",onClick:this.handleButtonClick,children:"Send e-mail"}),Object(v.jsx)("br",{}),Object(v.jsx)(g.b,{to:"/signIn",id:"forgot-link",variant:"v6",children:"Go back"}),Object(v.jsx)("br",{})]})})}}]),n}(a.a.Component),Pt=(n(636),"http://"+window.location.hostname+":8000"),Dt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).props=t,s.state={password1:null,password2:null,uid:s.props.match.params.uid,token:s.props.match.params.token},s.handleButtonClick=s.handleButtonClick.bind(Object(h.a)(s)),s}return Object(l.a)(n,[{key:"handleButtonClick",value:function(t){var e=this;t.target.disabled||fetch("".concat(Pt,"/auth/users/password_reset_confirm/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({uid:this.state.uid,token:this.state.token,new_password:this.state.password1,re_new_password:this.state.password2})}).then((function(t){e.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{success:!0})})),setTimeout((function(){return e.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{redirect:!0})}))}))}))}},{key:"render",value:function(){var t=this;return this.state.success?Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{id:"fpc",children:[Object(v.jsx)("span",{children:"Password reset successfully"}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"You are now being redirected to homepage"}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"Don't forget to sign in with your new password"}),this.state.redirect&&Object(v.jsx)(ut.a,{to:"/"})]})}):Object(v.jsx)("header",{className:"App-header",children:Object(v.jsxs)("div",{id:"fpc",children:[Object(v.jsx)("label",{htmlFor:"fpc-new-password1",id:"fpc-new-password1-text",children:"Enter your new password"}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"password",id:"fpc-new-password1",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{password1:e.target.value})}))}}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{htmlFor:"fpc-new-password2",id:"fpc-new-password2-text",children:"Retype your new password"}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"password",id:"fpc-new-password2",onChange:function(e){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{password2:e.target.value})}))}}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{id:"fpc-button",disabled:this.state.password1&&this.state.password2?"":"true",onClick:this.handleButtonClick,children:"Change password"})]})})}}]),n}(a.a.Component),Et=(n(637),"http://"+window.location.hostname+":8000"),Bt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).props=t,s.state={activationCompleted:!1,redirect:!1},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=window.location.pathname.split("/").slice(2,4),n=Object(I.a)(e,2),s=n[0],a=n[1];fetch("".concat(Et,"/auth/users/activation/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({uid:s,token:a})}).then((function(e){t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{activationCompleted:!0})})),setTimeout((function(){return t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{redirect:!0})}))}))}))}},{key:"render",value:function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(rt,{}),Object(v.jsx)("header",{className:"App-header",children:Object(v.jsx)("div",{id:"activation",children:this.state.activationCompleted?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:" Your account has been activated."}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"Now you are being redirected to homepage"}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"Don't forget to sign in with your new account"}),this.state.redirect&&Object(v.jsx)(ut.a,{to:"/"})]}):"Activating your account..."})})]})}}]),n}(a.a.Component),Mt=n(303),Rt="3.67.83.253",It=function(){var t=a.a.useState(0),e=Object(I.a)(t,2),n=e[0],i=e[1],c=a.a.useState(0),r=Object(I.a)(c,2),l=r[0],d=r[1],u=a.a.useState(0),h=Object(I.a)(u,2),j=h[0],b=h[1],p=a.a.useState([]),g=Object(I.a)(p,2),x=g[0],m=g[1],A=a.a.useState(!1),C=Object(I.a)(A,2),S=C[0],y=C[1],w=a.a.useState(!0),D=Object(I.a)(w,2),E=D[0],M=D[1],R=a.a.useState(),L=Object(I.a)(R,2),F=L[0],H=L[1],_=a.a.useState(),z=Object(I.a)(_,2),N=z[0],G=z[1],U=a.a.useState(),Y=Object(I.a)(U,2),W=Y[0],J=Y[1],Q=a.a.useState(!1),V=Object(I.a)(Q,2),K=V[0],Z=V[1],X=a.a.useState(!1),q=Object(I.a)(X,2),$=q[0],tt=q[1],et=a.a.useState(!1),nt=Object(I.a)(et,2),st=nt[0],at=nt[1];Object(s.useEffect)((function(){fetch("http://".concat(Rt,":8000/api/post/all/user/").concat(F),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(t){return t.json()})).then((function(t){t.sort((function(t,e){return parseInt(e.id)-parseInt(t.id)})),m(t),b(t.length),y(!0),console.log(t)}))}),[F]),Object(s.useEffect)((function(){fetch("http://".concat(Rt,":8000/api/user/get/").concat(F),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}}).then((function(t){return t.json()})).then((function(t){at(t.userPhoto),J(t.username),i(t.followedUsers.length),d(t.followerUsers.length);for(var e=0;e<t.followerUsers.length;e++)t.followerUsers[e]==N&&M(!1);console.log(t)}))}),[F,E]),Object(s.useEffect)((function(){H((function(){var t=window.location.href,e=t.search(/id=/g),n=parseInt(t.slice(e+3));return console.log("ID: "+n),console.log("Decoded: "+localStorage.getItem("userID")),G(localStorage.getItem("userID")),localStorage.getItem("userID")==n&&M(!1),n}))}),[]);var it=function(){Z(!1),M(!1)};return Object(v.jsxs)("div",{style:{backgroundColor:"#EBEBEB"},children:[Object(v.jsx)("div",{style:{height:1*window.innerHeight/20,width:window.innerWidth}}),Object(v.jsx)("hr",{style:{color:"black",backgroundColor:"black",height:2}}),Object(v.jsxs)(T.a,{children:[Object(v.jsxs)(k.a,{style:{alignItems:"center"},children:[Object(v.jsxs)(P.a,{sm:4,children:[Object(v.jsxs)("div",{className:"sliderContainer",children:[Object(v.jsx)("img",{onClick:function(){return tt((function(t){return!t}))},class:"circle",width:"50px",height:"50px",src:st||"./static/media/postory_logo_no_text.ec3bad21.png"}),$&&parseInt(localStorage.getItem("userID"))==F&&Object(v.jsx)("div",{className:"ppup",children:Object(v.jsx)("input",{onChange:function(t){var e=new FormData;e.append("image",t.target.files[0]),fetch("http://".concat(Rt,":8000/api/user/addPhoto"),{method:"POST",headers:{Authorization:"JWT ".concat(localStorage.getItem("access"))},body:e}),tt((function(t){return!t}))},type:"file",id:"file",accept:".jpg, .png"})})]}),Object(v.jsx)("div",{style:{fontSize:"16px",fontColor:"#08233B",fontWeight:"bold"},children:W})]}),Object(v.jsx)(P.a,{sm:2,children:Object(v.jsxs)("div",{style:{fontSize:"16px",fontColor:"#08233B"},children:["followers: ",l]})}),Object(v.jsx)(P.a,{sm:2,children:Object(v.jsxs)("div",{style:{fontSize:"16px",fontColor:"#08233B"},children:["followings: ",n]})}),Object(v.jsx)(P.a,{sm:2,children:Object(v.jsxs)("div",{style:{fontSize:"16px",fontColor:"#08233B"},children:["posts: ",j]})})]}),Object(v.jsx)("div",{style:{height:1*window.innerHeight/50,width:window.innerWidth}}),E&&Object(v.jsx)(Mt.a,{variant:"secondary",size:"sm",onClick:function(){fetch("http://".concat(Rt,":8000/api/user/follow/").concat(F),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))},body:JSON.stringify({})}).then(Z(!0))},children:"Follow"})]}),Object(v.jsx)("div",{className:"App-header",children:S&&x.map((function(t,e){return Object(v.jsx)(B,Object(o.a)({},t),e)}))}),Object(v.jsx)(O.a,{open:K,autoHideDuration:3e3,onClose:function(){return it()},children:Object(v.jsxs)(f.a,{onClose:function(){return it()},severity:"info",sx:{width:"100%"},children:["You have successfully followed ",W,"!"]})})]})},Lt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var s;Object(r.a)(this,n);return(s=e.call(this,t)).state={hasJWT:localStorage.getItem("access")},A("/api/post/all",{}).then((function(t){return s.setState({hasJWT:200==t.status&&localStorage.getItem("access")})})).catch((function(t){return console.log(t)})),s}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:!this.state.hasJWT&&Object(v.jsx)(ut.a,{class:"push",to:"/signIn",children:" "})})}}]),n}(a.a.Component);c.a.render(Object(v.jsx)(g.a,{children:Object(v.jsxs)(ut.d,{children:[Object(v.jsx)(ut.b,{path:"/",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(Lt,{}),Object(v.jsx)(rt,{})," ",Object(v.jsx)(M,{})]})}),Object(v.jsx)(ut.b,{path:"/createPost",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(Lt,{}),Object(v.jsx)(rt,{})," ",Object(v.jsx)(J,{})]})}),Object(v.jsx)(ut.b,{path:"/editPost",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(Lt,{}),Object(v.jsx)(rt,{})," ",Object(v.jsx)(Z,{})]})}),Object(v.jsx)(ut.b,{path:"/discover",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(Lt,{}),Object(v.jsx)(rt,{})," ",Object(v.jsx)(jt,{})]})}),Object(v.jsx)(ut.b,{path:"/signIn",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(rt,{}),Object(v.jsx)(pt,{})]})}),Object(v.jsx)(ut.b,{path:"/signUp",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(rt,{}),Object(v.jsx)(xt,{})]})}),Object(v.jsx)(ut.b,{path:"/forgotPassword",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(rt,{}),Object(v.jsx)(kt,{})]})}),Object(v.jsx)(ut.b,{path:"/password/reset/confirm/:uid/:token",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(rt,{}),Object(v.jsx)(Dt,{})]})}),Object(v.jsx)(ut.b,{path:"/activate/:uid/:token",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(rt,{}),Object(v.jsx)(Bt,{})]})}),Object(v.jsx)(ut.b,{path:"/viewPost",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(rt,{})," ",Object(v.jsx)(yt,{})]})}),Object(v.jsx)(ut.b,{path:"/profilePage",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(rt,{})," ",Object(v.jsx)(It,{})]})}),Object(v.jsx)(ut.b,{path:"/viewPost",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(Lt,{}),Object(v.jsx)(rt,{})," ",Object(v.jsx)(yt,{})]})})]})}),document.getElementById("root")),X()}},[[638,1,2]]]);
//# sourceMappingURL=main.0e36c9ce.chunk.js.map