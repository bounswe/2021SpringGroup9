<body>
    <div>
        <p id='joke'>

        </p>
        <title id='title'/>
        </title>
        <h1 id='header'>
        </h1>
        <h4 id='location'>
            
        </h4>
        
        <h5 id='date'>

        </h5>
        
        <h5 id='name'>
            Written by:
        </h5>
        <p id='story'>
        </p>
        <p id='nearbyplaces'>
        
        </p>
        <p id='city'>

        </p>
       
    </div>
</body>

<script type='text/javascript'>
    fetch("http://127.0.0.1:8000/api/story/"+{{story_id}},{method:'get'}).then(response => {
        return response.json()
    }).then(data => {
        document.getElementById('title').innerHTML+=data['title']
        document.getElementById('header').innerHTML+=data['title']
        document.getElementById('location').innerHTML+=data['location']
        document.getElementById('date').innerHTML+=data['date']
        document.getElementById('name').innerHTML+=data['name']
        document.getElementById('story').innerHTML+=data['story']
    })

    
    fetch("http://127.0.0.1:8000/api/joke/animal",{method:'get'}).then(response => {
        return response.json()
    }).then(data => {
        
            document.getElementById("joke").innerHTML+='<p>Joke of the Day: '+data["joke"]  +'</p>'
            
        
       
    })    

    fetch("http://127.0.0.1:8000/api/nearbyplaces/"+{{story_id}},{method:'get'}).then(response => {
        return response.json()
    }).then(data => { {if(data.length==0){document.getElementById("nearbyplaces").innerHTML+='<p>There are no nearby places with these parameters'  +'</p>' }}
        for(i=0; i<3; i++) {
                document.getElementById("nearbyplaces").innerHTML+='<p>Nearby Place '+(i+1)+' Name: '+data[i]["name"]
                    +' , Vicinity of the Place: '+data[i]["vicinity"]  
                    +'</p>'
                {if(data[i+1]==null){break}}
            }
        
       
    })     


    
    
    
    fetch("http://127.0.0.1:8000/api/city/"+{{story_id}},{method:'get'}).then(response => {
        return response.json()
    }).then(data => { {if(data.length==0){document.getElementById("city").innerHTML+='<p>There are no nearby cities with these parameters'  +'</p>' }}
        for(i=0; i<3; i++) {
                document.getElementById("city").innerHTML+='<p>Nearby City '+(i+1)+': ' +data[i]["name"]  +'</p>'
                {if(data[i+1]==null){break}}
            }
        
       
    })           
                                           
                                                       
     
        
        
           
                                        
    

    
</script>

