<body>
    <div>
        <title id='title'/>
        </title>
        <h1 id='header'>
        </h1>
        <h4 id='location'>

        </h4>
        <h5 id='date'>

        </h5>
        <p id='covid'>

        </p>
        <h5 id='name'>
            Written by:
        </h5>
        <p id='story'>
        
        </p>
        <img id ="map"/>
    </div>
</body>

<script type='text/javascript'>
    fetch("http://127.0.0.1:8000/api/story/"+{{story_id}},{method:'get'}).then(response => {
        return response.json()
    }).then(data => {
        document.getElementById('title').innerHTML+=data['title']
        document.getElementById('header').innerHTML+=data['title']
        document.getElementById('location').innerHTML+=data['location']
        document.getElementById('date').innerHTML+=data['date']
        document.getElementById('name').innerHTML+=data['name']
        document.getElementById('story').innerHTML+=data['story']
    })

    fetch("http://127.0.0.1:8000/api/posts/covid/"+{{story_id}},{method:'get'}).then(response => {
        return response.json()
    }).then(data => {
        document.getElementById('covid').innerHTML+='<p>Country: '+data['country']
                                                      +', Day: '+data['day']
                                                      +', New Cases: '+data['new cases']
                                                      +', New Deaths: '+data['new deaths']
                                                      +', Total Active Cases: '+data['active cases']
                                                      +'</p>'
    })

    fetch("http://127.0.0.1:8000/api/location/map/"+{{story_id}},{method:'get'}).then(response => {
            return response.blob()
        }).then(blob => {
            var img = URL.createObjectURL(blob);
            document.getElementById('map').src=img
    })

</script>